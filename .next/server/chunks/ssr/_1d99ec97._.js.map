{"version":3,"sources":["../../../../node_modules/.pnpm/%40tanstack%2Bquery-core%405.90.12/node_modules/%40tanstack/query-core/build/modern/infiniteQueryObserver.js","../../../../node_modules/.pnpm/%40tanstack%2Breact-query%405.90.12_react%4019.2.0/node_modules/%40tanstack/react-query/build/modern/useInfiniteQuery.js","../../../../app/view-moments/page.tsx"],"sourcesContent":["// src/infiniteQueryObserver.ts\nimport { QueryObserver } from \"./queryObserver.js\";\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n} from \"./infiniteQueryBehavior.js\";\nvar InfiniteQueryObserver = class extends QueryObserver {\n  constructor(client, options) {\n    super(client, options);\n  }\n  bindMethods() {\n    super.bindMethods();\n    this.fetchNextPage = this.fetchNextPage.bind(this);\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this);\n  }\n  setOptions(options) {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior()\n    });\n  }\n  getOptimisticResult(options) {\n    options.behavior = infiniteQueryBehavior();\n    return super.getOptimisticResult(options);\n  }\n  fetchNextPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"forward\" }\n      }\n    });\n  }\n  fetchPreviousPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"backward\" }\n      }\n    });\n  }\n  createResult(query, options) {\n    const { state } = query;\n    const parentResult = super.createResult(query, options);\n    const { isFetching, isRefetching, isError, isRefetchError } = parentResult;\n    const fetchDirection = state.fetchMeta?.fetchMore?.direction;\n    const isFetchNextPageError = isError && fetchDirection === \"forward\";\n    const isFetchingNextPage = isFetching && fetchDirection === \"forward\";\n    const isFetchPreviousPageError = isError && fetchDirection === \"backward\";\n    const isFetchingPreviousPage = isFetching && fetchDirection === \"backward\";\n    const result = {\n      ...parentResult,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(options, state.data),\n      hasPreviousPage: hasPreviousPage(options, state.data),\n      isFetchNextPageError,\n      isFetchingNextPage,\n      isFetchPreviousPageError,\n      isFetchingPreviousPage,\n      isRefetchError: isRefetchError && !isFetchNextPageError && !isFetchPreviousPageError,\n      isRefetching: isRefetching && !isFetchingNextPage && !isFetchingPreviousPage\n    };\n    return result;\n  }\n};\nexport {\n  InfiniteQueryObserver\n};\n//# sourceMappingURL=infiniteQueryObserver.js.map","\"use client\";\n\n// src/useInfiniteQuery.ts\nimport { InfiniteQueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useInfiniteQuery(options, queryClient) {\n  return useBaseQuery(\n    options,\n    InfiniteQueryObserver,\n    queryClient\n  );\n}\nexport {\n  useInfiniteQuery\n};\n//# sourceMappingURL=useInfiniteQuery.js.map","\"use client\";\n\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\nimport Image from \"next/image\";\nimport MomentIsLoading from \"@/components/moment-is-loading\";\nimport gsap from \"gsap\";\nimport { useRef } from \"react\";\nimport { useGSAP } from \"@gsap/react\";\n\ntype Moment = {\n    id: number;\n    imageUrl: string;\n};\n\ntype ApiResponse = {\n    data: Moment[];\n    pagination: {\n        page: number;\n        limit: number;\n        hasMore: boolean;\n    };\n};\n\nexport default function ViewMoments() {\n    const box = useRef(null);\n    useGSAP(() => {\n        gsap.from(box.current, {\n            y: 20,\n            opacity: 0,\n            duration: 0.6,\n            ease: \"power2.out\",\n        });\n    });\n    const {\n        data,\n        fetchNextPage,\n        hasNextPage,\n        isFetchingNextPage,\n        isPending,\n        isError,\n        error,\n    } = useInfiniteQuery({\n        queryKey: [\"moments\"],\n        queryFn: ({ pageParam = 1 }): Promise<ApiResponse> =>\n            fetch(\n                `https://sam-s-birthdayapi-production.up.railway.app/api/v1/moment?page=${pageParam}&limit=9`\n            ).then((res) => res.json()),\n\n        initialPageParam: 1,\n\n        getNextPageParam: (lastPage) => {\n            return lastPage.pagination.hasMore\n                ? lastPage.pagination.page + 1\n                : undefined;\n        },\n    });\n\n    return (\n        <section className=\"pt-36 pb-10 px-4 min-h-screen flex flex-col items-center xl:px-[220px] bg-[#FCFBFA]\">\n            <div className=\"container mx-auto\">\n                <h3\n                    ref={box}\n                    className=\"text-black text-sm font-normal tracking-[2.8px] lg:leading-[30px] sm:text-xl text-center\"\n                >\n                    This gallery captures moments, milestones, and memories that\n                    tell the story of Samuel&apos;s journey. Each photo holds a\n                    piece of laughter, growth, and experiences that have shaped\n                    who he is today. More than pictures, these are memories\n                    worth celebrating.\n                </h3>\n                <div className=\"flex justify-center sm:flex-row flex-wrap gap-7\">\n                    {isPending && <MomentIsLoading />}\n                    {isError && (\n                        <span className=\"text-3xl text-red-500 text-center\">\n                            {error.message}\n                        </span>\n                    )}\n                </div>\n                <div className=\"grid grid-cols-1 mt-10 xl:mt-16 gap-5 md:grid-cols-3\">\n                    {data?.pages.flatMap((page) =>\n                        page.data.map((item) => (\n                            <figure key={item.id} className=\"max-h-[400px]\">\n                                <Image\n                                    className=\"w-full h-full object-cover\"\n                                    src={item.imageUrl}\n                                    width={320}\n                                    height={360}\n                                    alt=\"Moment\"\n                                />\n                            </figure>\n                        ))\n                    )}\n                </div>\n                {hasNextPage && (\n                    <section\n                        className={`${\n                            isPending ? \"hidden\" : \"flex\"\n                        }  items-center justify-center`}\n                    >\n                        <button\n                            onClick={() => fetchNextPage()}\n                            disabled={isFetchingNextPage}\n                            className=\"text-white font-medium text-center active:scale-95 transition-transform duration-150 cursor-pointer rounded-xl py-3 mt-9 w-fit px-10 bg-[#6A0DAD] text-base\"\n                        >\n                            {isFetchingNextPage ? \"loading...\" : \"View more\"}\n                        </button>\n                    </section>\n                )}\n            </div>\n        </section>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}