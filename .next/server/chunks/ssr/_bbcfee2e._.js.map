{"version":3,"sources":["../../../../components/wishes-loading.tsx","../../../../node_modules/.pnpm/%40tanstack%2Bquery-core%405.90.12/node_modules/%40tanstack/query-core/build/modern/infiniteQueryObserver.js","../../../../node_modules/.pnpm/%40tanstack%2Breact-query%405.90.12_react%4019.2.0/node_modules/%40tanstack/react-query/build/modern/useInfiniteQuery.js","../../../../app/view-wishes/page.tsx"],"sourcesContent":["import { cn } from \"@/utils/util\";\n\ntype WishesIsLoadingProps = {\n    className?: string;\n    length?: number;\n};\n\nexport default function WishesLoading({\n    className,\n    length = 12,\n}: WishesIsLoadingProps) {\n    return (\n        <div\n            className={cn(\n                \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 animate-pulse gap-4\",\n                className\n            )}\n        >\n            {Array.from({ length }).map((_, index) => (\n                <div\n                    key={index}\n                    className=\"h-[235px] w-full sm:w-[330px] drop-shadow-2xl drop-shadow-[#0000000D] bg-white rounded-t-2xl rounded-br-2xl custom-clip\"\n                ></div>\n            ))}\n        </div>\n    );\n}\n","// src/infiniteQueryObserver.ts\nimport { QueryObserver } from \"./queryObserver.js\";\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n} from \"./infiniteQueryBehavior.js\";\nvar InfiniteQueryObserver = class extends QueryObserver {\n  constructor(client, options) {\n    super(client, options);\n  }\n  bindMethods() {\n    super.bindMethods();\n    this.fetchNextPage = this.fetchNextPage.bind(this);\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this);\n  }\n  setOptions(options) {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior()\n    });\n  }\n  getOptimisticResult(options) {\n    options.behavior = infiniteQueryBehavior();\n    return super.getOptimisticResult(options);\n  }\n  fetchNextPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"forward\" }\n      }\n    });\n  }\n  fetchPreviousPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"backward\" }\n      }\n    });\n  }\n  createResult(query, options) {\n    const { state } = query;\n    const parentResult = super.createResult(query, options);\n    const { isFetching, isRefetching, isError, isRefetchError } = parentResult;\n    const fetchDirection = state.fetchMeta?.fetchMore?.direction;\n    const isFetchNextPageError = isError && fetchDirection === \"forward\";\n    const isFetchingNextPage = isFetching && fetchDirection === \"forward\";\n    const isFetchPreviousPageError = isError && fetchDirection === \"backward\";\n    const isFetchingPreviousPage = isFetching && fetchDirection === \"backward\";\n    const result = {\n      ...parentResult,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(options, state.data),\n      hasPreviousPage: hasPreviousPage(options, state.data),\n      isFetchNextPageError,\n      isFetchingNextPage,\n      isFetchPreviousPageError,\n      isFetchingPreviousPage,\n      isRefetchError: isRefetchError && !isFetchNextPageError && !isFetchPreviousPageError,\n      isRefetching: isRefetching && !isFetchingNextPage && !isFetchingPreviousPage\n    };\n    return result;\n  }\n};\nexport {\n  InfiniteQueryObserver\n};\n//# sourceMappingURL=infiniteQueryObserver.js.map","\"use client\";\n\n// src/useInfiniteQuery.ts\nimport { InfiniteQueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useInfiniteQuery(options, queryClient) {\n  return useBaseQuery(\n    options,\n    InfiniteQueryObserver,\n    queryClient\n  );\n}\nexport {\n  useInfiniteQuery\n};\n//# sourceMappingURL=useInfiniteQuery.js.map","\"use client\";\n\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\nimport WishesLoading from \"@/components/wishes-loading\";\nimport gsap from \"gsap\";\nimport { useRef } from \"react\";\nimport { useGSAP } from \"@gsap/react\";\n\ntype Wish = {\n    id: number;\n    name: string;\n    message: string;\n};\n\ntype ApiResponse = {\n    data: Wish[];\n    pagination: {\n        page: number;\n        limit: number;\n        hasMore: boolean;\n    };\n};\n\nexport default function ViewWishes() {\n    const box = useRef(null);\n    useGSAP(() => {\n        gsap.from(box.current, {\n            y: 20,\n            opacity: 0,\n            duration: 0.6,\n            ease: \"power2.out\",\n        });\n    });\n\n    const {\n        data,\n        fetchNextPage,\n        hasNextPage,\n        isFetchingNextPage,\n        isPending,\n        isError,\n        error,\n    } = useInfiniteQuery({\n        queryKey: [\"wish\"],\n        queryFn: ({ pageParam = 1 }): Promise<ApiResponse> =>\n            fetch(\n                `https://sam-s-birthdayapi-production.up.railway.app/api/v1/birthday-wish?page=${pageParam}&limit=9`\n            ).then((res) => res.json()),\n\n        initialPageParam: 1,\n\n        getNextPageParam: (lastPage) => {\n            return lastPage.pagination.hasMore\n                ? lastPage.pagination.page + 1\n                : undefined;\n        },\n    });\n\n    return (\n        <section className=\"pt-36 pb-10 px-4 min-h-screen flex flex-col items-center xl:px-[220px] bg-[#FCFBFA]\">\n            <div className=\"container mx-auto\">\n                <h3\n                    ref={box}\n                    className=\"text-black text-sm sm:text-lg tracking-[2.8px] lg:leading-[30px] font-normal text-center\"\n                >\n                    This page is filled with heartfelt birthday wishes from\n                    friends, family, and loved ones. Each message is a\n                    reflection of the impact Samuel has made, the joy he brings\n                    to others, and the love surrounding him as he celebrates\n                    another beautiful year.\n                </h3>\n                <div className=\"flex flex-col mt-10 xl:mt-16  justify-center sm:flex-row flex-wrap gap-7\">\n                    {isPending && <WishesLoading />}\n                    {isError && (\n                        <span className=\"text-3xl text-red-500 text-center\">\n                            {error.message}\n                        </span>\n                    )}\n                    {data?.pages.flatMap((page) =>\n                        page.data.map((wish) => (\n                            <div key={wish.id} className=\"w-full sm:w-[330px]\">\n                                <div>\n                                    <div className=\"h-[235px] drop-shadow-2xl drop-shadow-[#0000000D] px-7 py-7 flex justify-center bg-white rounded-t-2xl rounded-br-2xl custom-clip\">\n                                        <p className=\"text-black font-nunito text-sm\">\n                                            {wish.message}\n                                        </p>\n                                    </div>\n\n                                    <h2 className=\"text-black font-nunito text-center\">\n                                        {wish.name}\n                                    </h2>\n                                </div>\n                            </div>\n                        ))\n                    )}\n                </div>\n\n                {hasNextPage && (\n                    <section\n                        className={`${\n                            isPending ? \"hidden\" : \"flex\"\n                        }  items-center justify-center`}\n                    >\n                        <button\n                            onClick={() => fetchNextPage()}\n                            disabled={isFetchingNextPage}\n                            className=\"text-white font-medium active:scale-95 transition-transform duration-150 text-center cursor-pointer rounded-xl py-3 mt-9 w-fit px-10 bg-[#6A0DAD] text-base\"\n                        >\n                            {isFetchingNextPage ? \"loading...\" : \"View more\"}\n                        </button>\n                    </section>\n                )}\n            </div>\n        </section>\n    );\n}\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OAOe,SAAS,EAAc,WAClC,CAAS,QACT,EAAS,EAAE,CACQ,EACnB,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACT,qEACA,YAGH,MAAM,IAAI,CAAC,QAAE,CAAO,GAAG,GAAG,CAAC,CAAC,EAAG,IAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEG,UAAU,2HADL,KAMzB,gDCzBA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAKI,EAAwB,cAAc,EAAA,aAAa,CACrD,YAAY,CAAM,CAAE,CAAO,CAAE,CAC3B,KAAK,CAAC,EAAQ,EAChB,CACA,aAAc,CACZ,KAAK,CAAC,cACN,IAAI,CAAC,aAAa,CAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EACjD,IAAI,CAAC,iBAAiB,CAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAC3D,CACA,WAAW,CAAO,CAAE,CAClB,KAAK,CAAC,WAAW,CACf,GAAG,CAAO,CACV,SAAU,CAAA,EAAA,EAAA,qBAAA,AAAqB,GACjC,EACF,CACA,oBAAoB,CAAO,CAAE,CAE3B,OADA,EAAQ,QAAQ,CAAG,CAAA,EAAA,EAAA,qBAAA,AAAqB,IACjC,KAAK,CAAC,oBAAoB,EACnC,CACA,cAAc,CAAO,CAAE,CACrB,OAAO,IAAI,CAAC,KAAK,CAAC,CAChB,GAAG,CAAO,CACV,KAAM,CACJ,UAAW,CAAE,UAAW,SAAU,CACpC,CACF,EACF,CACA,kBAAkB,CAAO,CAAE,CACzB,OAAO,IAAI,CAAC,KAAK,CAAC,CAChB,GAAG,CAAO,CACV,KAAM,CACJ,UAAW,CAAE,UAAW,UAAW,CACrC,CACF,EACF,CACA,aAAa,CAAK,CAAE,CAAO,CAAE,CAC3B,GAAM,CAAE,OAAK,CAAE,CAAG,EACZ,EAAe,KAAK,CAAC,aAAa,EAAO,GACzC,YAAE,CAAU,cAAE,CAAY,SAAE,CAAO,gBAAE,CAAc,CAAE,CAAG,EACxD,EAAiB,EAAM,SAAS,EAAE,WAAW,UAC7C,EAAuB,GAA8B,YAAnB,EAClC,EAAqB,GAAiC,YAAnB,EACnC,EAA2B,GAA8B,aAAnB,EACtC,EAAyB,GAAiC,aAAnB,EAc7C,MAbe,CACb,AAYK,GAZF,CAAY,CACf,cAAe,IAAI,CAAC,aAAa,CACjC,kBAAmB,IAAI,CAAC,iBAAiB,CACzC,YAAa,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,EAAS,EAAM,IAAI,EAC5C,gBAAiB,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,EAAS,EAAM,IAAI,uBACpD,qBACA,2BACA,yBACA,EACA,eAAgB,GAAkB,CAAC,GAAwB,CAAC,EAC5D,aAAc,GAAgB,CAAC,GAAsB,CAAC,CACxD,CAEF,CACF,EC9DA,EAAA,EAAA,CAAA,CAAA,OACA,SAAS,EAAiB,CAAO,CAAE,CAAW,EAC5C,MAAO,CAAA,EAAA,EAAA,YAAA,AAAY,EACjB,EACA,EACA,EAEJ,gFCTA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAiBe,SAAS,IACpB,IAAM,EAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,MACnB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACJ,EAAA,OAAI,CAAC,IAAI,CAAC,EAAI,OAAO,CAAE,CACnB,EAAG,GACH,QAAS,EACT,SAAU,GACV,KAAM,YACV,EACJ,GAEA,GAAM,MACF,CAAI,eACJ,CAAa,aACb,CAAW,oBACX,CAAkB,WAClB,CAAS,SACT,CAAO,OACP,CAAK,CACR,CAAG,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,CACjB,SAAU,CAAC,OAAO,CAClB,QAAS,CAAC,WAAE,EAAY,CAAC,CAAE,GACvB,MACI,CAAC,8EAA8E,EAAE,EAAU,QAAQ,CAAC,EACtG,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IAE5B,iBAAkB,EAElB,iBAAkB,AAAC,GACR,EAAS,UAAU,CAAC,OAAO,CAC5B,EAAS,UAAU,CAAC,IAAI,CAAG,EAC3B,MAEd,GAEA,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,+FACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CACG,IAAK,EACL,UAAU,oGACb,4PAOD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qFACV,GAAa,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,CAAA,GAC3B,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CACX,EAAM,OAAO,GAGrB,GAAM,MAAM,QAAQ,AAAC,GAClB,EAAK,IAAI,CAAC,GAAG,CAAC,AAAC,GACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAkB,UAAU,+BACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6IACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CACR,EAAK,OAAO,KAIrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8CACT,EAAK,IAAI,OATZ,EAAK,EAAE,OAiB5B,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CACG,UAAW,CAAA,EACP,EAAY,SAAW,OAC1B,6BAA6B,CAAC,UAE/B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,IACf,SAAU,EACV,UAAU,uKAET,EAAqB,aAAe,oBAOjE","ignoreList":[1,2]}